---
import Layout from '../layouts/Layout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog - Oswaldo Bello | Mentoría y Tecnología">
  <main class="py-20">
    <div class="container mx-auto px-4">
      <h1 class="text-5xl font-bold mb-8 bg-gradient-to-r from-primary-cyan to-primary-blue text-transparent bg-clip-text reveal">
        Blog Técnico & Mentoría
      </h1>
      <p class="text-gray-400 text-xl mb-16 max-w-2xl reveal">
        Compartiendo conocimientos, experiencias de Master Classes y reflexiones sobre el futuro del desarrollo de software.
      </p>

      <div class="grid gap-12">
        {posts.map((post: CollectionEntry<'blog'>) => (
          <article class="flex flex-col md:flex-row gap-8 bg-white/5 p-8 rounded-2xl border border-white/10 hover:border-primary-cyan/30 transition-all reveal group">
            {post.data.heroImage && (
              <div class="md:w-1/3 overflow-hidden rounded-xl h-48 md:h-64">
                <img 
                  src={post.data.heroImage.src} 
                  alt={post.data.title}
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                />
              </div>
            )}
            <div class="flex-1 flex flex-col justify-center">
              <div class="flex gap-2 mb-4">
                {post.data.tags?.map((tag: string) => (
                  <span class="text-[10px] font-bold uppercase tracking-widest text-primary-cyan px-2 py-1 bg-primary-cyan/10 rounded-full">
                    {tag}
                  </span>
                ))}
              </div>
              <h2 class="text-3xl font-bold mb-4 group-hover:text-primary-cyan transition-colors">{post.data.title}</h2>
              <p class="text-gray-400 mb-6 leading-relaxed">
                {post.data.description}
              </p>
              <div class="mt-auto flex items-center justify-between">
                <span class="text-sm text-gray-500">
                  {post.data.pubDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}
                </span>
                <a href={`${import.meta.env.BASE_URL}/blog/${post.slug}`} class="text-primary-cyan font-bold hover:underline">
                  Leer más →
                </a>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </main>
</Layout>
